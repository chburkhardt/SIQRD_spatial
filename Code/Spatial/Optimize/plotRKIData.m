%% Quick script to plot the data we have right nowclose all;data = read_case_history();numDates = length(data{1}.time);numStates = 16;time = cell2mat(data{1}.time);%Correct for day shifttime = time - time(1);infected = zeros(numStates,numDates);infectedMovAvg = zeros(numStates,numDates);infectedCum = zeros(numStates,numDates);dead = zeros(numStates,numDates);for i=1:numStates  infected(i,:) = cell2mat(data{i}.infected);  dead(i,:) = cell2mat(data{i}.dead);
end%% Compute cumulative infected per stateinfectedCum=infected;for i = 2:numDates  infectedCum(:,i) = sum(infectedCum(:,i-1:i)');end%%Moving average to smoothen Sunday dipdepth = 7;infectedMovAvg=infected;for i = 2:numDates  if i <= depth    infectedMovAvg(:,i) = sum(infected(:,1:i)')./i;  else    infectedMovAvg(:,i) = sum(infected(:,i-depth+1:i)')./depth;  endendsave "../../../Daten/rollAvgRKIInfections.mat" rollAvgRKIInfections;save "../../../Daten/cumRKIInfections.mat" cumRKIInfections;save "../../../Daten/newRKIInfections.mat" newRKIInfections;save "../../../Daten/RKIdead.mat" RKIdead;
plot(time,infected);xlabel('days');ylabel('new infections');print -dpng "../../../Results/newRKIInfections.png"figure;plot(time,infectedCum);xlabel('days');ylabel('cumulative infections');print -dpng "../../../Results/cumRKIInfections.png"figure;plot(time,infectedMovAvg);xlabel('days');ylabel('smoothed new infections');print -dpng "../../../Results/rollAvgRKIInfections.png"figure;plot(time,dead);xlabel('days');ylabel('cumulative dead');print -dpng "../../../Results/RKIdead.png"